<%- include('../partials/header') %>

<style>
  .show-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 2rem;
  }

  .show-card {
    aspect-ratio: 9/16;
    width: 100%;
    min-width: 0;
    max-height: 15rem;
    background: #23232a;
    border-radius: 16px;
    box-shadow: 0 1px 6px rgba(0, 0, 0, 0.15);
    padding: 0.7rem 0.7rem 1.2rem 0.7rem;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    position: relative;
    overflow: hidden;
    transition: all 0.3s;
  }

  .show-card:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    cursor: pointer;
  }
</style>

<main class="container" style="align-items: stretch">
  <div style="width: 100%; max-width: 900px; margin: 0 auto">
    <form
      method="GET"
      action="/tvshows"
      style="margin-bottom: 2rem; display: flex; justify-content: center"
    >
      <input
        type="text"
        name="query"
        placeholder="Search by Title"
        value="<%= query %>"
        style="
          width: 60%;
          padding: 0.8rem 1rem;
          border-radius: 30px;
          border: none;
          background: #23232a;
          color: #e5e7eb;
          font-size: 1rem;
          margin-right: 1rem;
          outline: none;
        "
      />
      <button type="submit" class="cta-btn" style="margin-top: 0">
        Search
      </button>
    </form>
    <div class="show-grid">
      <% shows.forEach(function(show) { %>
      <a
        href="/tvshows/<%= show.tmdbid %>"
        style="text-decoration: none; color: inherit"
      >
        <div
          class="show-card"
          style="background: url(./img/noPoster.png) center/cover, #23232a"
        >
          <div
            style="
              position: absolute;
              inset: 0;
              background: rgba(24, 24, 27, 0.78);
              border-radius: 16px;
            "
          ></div>
          <div
            style="
              position: relative;
              z-index: 1;
              font-size: 1.1rem;
              font-weight: 700;
              color: #fbbf24;
              margin-bottom: 0.5rem;
              word-break: break-word;
            "
          >
            <%= show.orig_title %>
          </div>
          <div
            style="
              position: relative;
              z-index: 1;
              color: #a3a3a3;
              font-size: 0.95rem;
              margin-bottom: 0.3rem;
            "
          >
            TV Show
          </div>
          <div
            style="
              position: relative;
              z-index: 1;
              color: #e5e7eb;
              font-size: 0.95rem;
              background: #29292f;
              border-radius: 8px;
              padding: 0.2rem 0.7rem;
              display: inline-block;
              margin-bottom: 0.2rem;
            "
          >
            <%= show.Quality %>
          </div>
        </div>
      </a>
      <% }); %>
    </div>
    <div
      style="
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 2.5rem;
      "
    >
      <% if (page > 1) { %>
      <button class="cta-btn" style="padding: 0.7rem 2rem; font-size: 1rem">
        <a class="btn-text" href="/tvshows?page=<%= Number(page) - 1 %>"
          >Previous</a
        >
      </button>
      <% } %> <% if (page < lastPage) { %>
      <button class="cta-btn" style="padding: 0.7rem 2rem; font-size: 1rem">
        <a class="btn-text" href="/tvshows?page=<%= Number(page) + 1  %>"
          >Next</a
        >
      </button>
      <% } %>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>
