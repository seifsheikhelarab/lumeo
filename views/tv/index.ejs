<%- include('../partials/header') %>

<link rel="stylesheet" href="/css/discover.style.css" />
<main class="container discover-main">
  <div class="inside">
    <form method="GET" action="/tvshows" class="search-form">
      <input
        type="text"
        name="query"
        placeholder="Search by Title"
        value="<%= query %>"
        class="search-input"
      />
      <button type="submit" class="cta-btn search-btn">
        Search
      </button>
    </form>
    <div class="discover-grid">
      <% shows.forEach(function(show) { %>
      <a href="/tvshows/<%= show.id %>" class="discover-card-link">
        <div
          class="discover-card"
          style="--poster:url('https://image.tmdb.org/t/p/original<%= show.poster_path %>')"
        >
          <div class="card-overlay"></div>
          <div class="card-title"><%= show.name %></div>
          <div class="card-subtitle">TV Show</div>
          <div class="card-chip"><%= show.vote_average.toFixed(1) %> / 10</div>
        </div>
      </a>
      <% }); %>
    </div>
    <div class="pagination">
      <% if (page > 1) { %>
      <button class="cta-btn">
        <a class="btn-text" href="/tvshows?page=<%= Number(page) - 1 %>">Previous</a>
      </button>
      <% } %>
      <% if (page < lastPage) { %>
      <button class="cta-btn">
        <a class="btn-text" href="/tvshows?page=<%= Number(page) + 1 %>">Next</a>
      </button>
      <% } %>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>
